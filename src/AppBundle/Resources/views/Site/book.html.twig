{% extends "@App/layout.html.twig" %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/app/js/owl.carousel.min.js') }}"></script>
    <script src="{{ asset('bundles/app/js/jquery.star-rating-svg.min.js') }}"></script>
    <script src="{{ asset('bundles/app/js/es5-shims.min.js') }}"></script>
    <script src="{{ asset('bundles/app/js/share.js') }}"></script>
    <script src="{{ asset('bundles/app/js/book-page.js') }}"></script>
    <script>
        var userRatingText = "{{ 'front.user_rating'|trans }}:";
        var bookRating     = {{ book.rating|default(0) }};
        {% if app.user.id is defined %}
            var bookRatingPath = "{{ path('add_book_rating', {"userId": app.user.id, "bookId": book.book_id }) }}";
        {% endif %}
    </script>
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('bundles/app/css/owl.carousel.css') }}" />
    <link rel="stylesheet" href="{{ asset('bundles/app/css/star-rating-svg.css') }}" />
{% endblock %}

{% block body %}
<div class="kf_content_wrap">
    <div class="product-detail1">
        <div class="section">
            <div class="container">
                <div class="row">
                    <div class="col-md-9">
                        <div class="book-view book-view2">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="thumb">
                                        <div class="thumb-slider">
                                            <ul class="bxslider1">
                                                <li><img src="{{ book.cover_path is defined and book.cover_path ? book.cover_path|imagine_filter('book_full') : asset('compiled/images/no-cover.jpg') }}" alt="{{ book.title }}" /></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-5">
                                    <div class="book-text">
                                        <div class="book-heading book-padding">
                                            <h3>{{ book.title }}</h3>
                                            <div class="book-review">
                                                <div class="book-rating"></div>
                                                <span class="book-user-rating"></span>
                                            </div>
                                        </div>
                                        <div class="book-tags-wrap book-padding">
                                            <ul class="book-tags">
                                                <li><span>{{ 'front.author'|trans }}:</span></li>
                                                <li>
                                                    {% for author in book.authors %}
                                                        <a href="/{{ author.path }}">{{ author.full_name }}</a>
                                                    {% endfor %}
                                                </li>
                                            </ul>
                                            {% if book.tags|length > 0 %}
                                                <ul class="book-tags">
                                                    <li><span>{{ 'front.tags'|trans }}:</span></li>
                                                    <li>
                                                        {% for tag in book.tags %}
                                                            <a href="/{{ tag.path }}">{{ tag.title }}</a>
                                                        {% endfor %}
                                                    </li>
                                                </ul>
                                            {% endif %}
                                            {% if book.genres|length > 0 %}
                                                <ul class="book-tags">
                                                    <li><span>{{ 'front.genres'|trans }}:</span></li>
                                                    <li>
                                                        {% for genre in book.genres %}
                                                            <a href="/{{ genre.path }}">{{ genre.title }}</a>
                                                        {% endfor %}
                                                    </li>
                                                </ul>
                                            {% endif %}
                                            {% if book.sequence %}
                                                <ul class="book-tags">
                                                    <li><span>{{ 'front.sequence'|trans }}:</span></li>
                                                    <li>
                                                        <a href="/{{ book.sequence.path }}">
                                                            {{- book.sequence.name -}}
                                                            {%- if book.sequence_number -%}
                                                                {{ 'front.number_in_sequence'|trans({
                                                                    '%number%': book.sequence_number
                                                                }) }}
                                                            {%- endif -%}
                                                        </a>
                                                    </li>
                                                </ul>
                                            {% endif %}
                                            {% if book.date is defined %}
                                                <ul class="book-tags">
                                                    <li><span>{{ 'front.year'|trans }}:</span></li>
                                                    <li><a>{{ book.date|date('Y') }}</a></li>
                                                </ul>
                                            {% endif %}

                                            {% if download_links|length > 0 %}
                                                <ul class="book-tags">
                                                    <li><span>{{ 'front.download'|trans }}:</span></li>
                                                    {%- for link in download_links -%}
                                                        <li><a href="{{ link['url'] }}">{{ link['text'] }}</a></li>
                                                    {%- endfor -%}
                                                </ul>
                                            {% endif %}

                                            <div class="book-tags">
                                                <a class="btn-1" href="{{ read_link }}">{{ 'front.read_book'|trans }}</a>
                                            </div>

                                            <div class="ya-share2" data-services="vkontakte,facebook,odnoklassniki,moimir,gplus" data-counter=""></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <aside class="col-md-3">
                        {% include "@App/Elements/featured_books_aside.html.twig" %}
                    </aside>
                </div>
                <div class="book-tabs2">
                    <ul class="nav nav-tabs books-tab" role="tablist">
                        <li role="presentation" class="active"><a href="#annotation" aria-controls="annotation" role="tab" data-toggle="tab">{{ 'front.book.annotation'|trans }}</a></li>
                    </ul>
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane fade in active" id="annotation">
                            {{ book.annotation|raw }}
                            {% if book.city_published and
                                book.publisher and
                                book.year_published and
                                book.isbn %}
                                <p>{{ 'front.book_published'|trans({
                                    '%city%': book.city_published,
                                    '%publisher%': book.publisher,
                                    '%year%': book.year_published,
                                    '%isbn%': book.isbn,
                                }) }}</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% include "@App/Elements/featured_books_slider.html.twig" %}
    </div>
</div>
{% endblock %}